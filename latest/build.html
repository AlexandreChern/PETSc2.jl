<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Build System · Petsc2.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Petsc2.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">PETSc2.jl Documentation</a></li><li class="current"><a class="toctext" href="build.html">Build System</a><ul class="internal"><li><a class="toctext" href="#Installing-Other-Dependencies-1">Installing Other Dependencies</a></li><li><a class="toctext" href="#Installing-PETSc-1">Installing PETSc</a></li><li><a class="toctext" href="#Linking-other-programs-to-PETSc-1">Linking other programs to PETSc</a></li><li><a class="toctext" href="#Debugging-Install-1">Debugging Install</a></li></ul></li><li><a class="toctext" href="init.html">Initialization and Finalization</a></li><li><a class="toctext" href="vec.html">Vec Documentation</a></li><li><a class="toctext" href="vec_interface.html">Vec Interface</a></li><li><a class="toctext" href="mat.html">Mat Documentation</a></li><li><a class="toctext" href="mat_interface.html">Mat Interface</a></li><li><a class="toctext" href="constants.html">Constants</a></li><li><a class="toctext" href="ksp.html">KSP Documentation</a></li><li><a class="toctext" href="pc.html">PC Documentation</a></li><li><a class="toctext" href="options.html">Options Documentation</a></li><li><a class="toctext" href="error.html">Error Handling Documentation</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="build.html">Build System</a></li></ul><a class="edit-page" href="https://github.com/OptimalDesignLab/PETSc2.jl/blob/master/docs/src/build.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Build System</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Build-System-1" href="#Build-System-1">Build System</a></h1><p>Installing <code>PETSc2</code> required:</p><ul><li><p><code>MPI.jl</code></p></li><li><p><code>ArrayViews.jl</code></p></li><li><p><code>PETSc</code> itself</p></li></ul><h2><a class="nav-anchor" id="Installing-Other-Dependencies-1" href="#Installing-Other-Dependencies-1">Installing Other Dependencies</a></h2><p><code>MPI.jl</code> will be install automatically if it is not already present. The release version of <code>MPI.jl</code> does not work, so the build system installs an older version. Before you install <code>MPI.jl</code>, you must have an MPI implementation installed.  Some systems come with MPI pre-installed, others do not.  If you are unsure which MPI implementation to install, I recommend MPICH, which is available as a package for Debian-based system.</p><p><code>ArrayViews.jl</code> will also be installed if not present.  </p><h2><a class="nav-anchor" id="Installing-PETSc-1" href="#Installing-PETSc-1">Installing PETSc</a></h2><p>The build system looks for an existing PETSc installation and only attempts to build PETSc if one is not found.  It looks for the <code>PETSC_DIR</code> and <code>PETSC_ARCH</code> environment variables.  If they are both present, PETSc is not installed.</p><p>If you want the build system to build PETSc, you must first install</p><ul><li><p>MPI (described in the previous section)</p></li><li><p>BLAS</p></li><li><p>LAPACK</p></li><li><p>Python</p></li></ul><p>Note that PETSc cannot link to the BLAS and LAPACK packaged with Julia. Instead, it links to the system BLAS and LAPACK. The efficiency of PETSc depends on the efficiency of BLAS, so it is recommended to obtain a high-quality BLAS (for example, if you machine has a vendor-provided BLAS implemention) and compile it from source on your machine.</p><p>Python is required by the PETSc build system.  It is not used by PETSc at runtime.</p><p>By default, the build system builds a <code>debug</code> version of PETSc.  This enables error checking within PETSc that is useful for debugging, at the cost of some performance.  To build an optimized version of PETSc, see the <code>deps/install_petsc.sh</code> script.</p><p>Note that arguments passed to the <code>install_petsc.sh</code> script are passed to PETSc&#39;s <code>configure</code> command.  If you want non-default options, running this script directly (not as part of the build system) is the recommended way to build PETSc. After doing so, set the <code>PETSC_DIR</code> and <code>PETSC_ARCH</code> environment variables before running <code>build.jl</code> (see the next section).</p><p>Even if the build system builds PETSc, it is still possible to use other versions of PETSc by setting the <code>PETSC_DIR</code> and <code>PETSC_ARCH</code> environment variables at runtime.  If these variables are not present, the version of PETSc built by the build system is used.</p><h2><a class="nav-anchor" id="Linking-other-programs-to-PETSc-1" href="#Linking-other-programs-to-PETSc-1">Linking other programs to PETSc</a></h2><p>The build system generates a file <code>deps/use_petsc.sh</code>.  Running <code>source deps/use_petsc.sh</code> will set the <code>PETSC_DIR</code> and <code>PETSC_ARCH</code> environment variables corresponding to the PETSc build by the build system.  This enables, for example, compiling C programs against this version of PETSc.</p><h2><a class="nav-anchor" id="Debugging-Install-1" href="#Debugging-Install-1">Debugging Install</a></h2><p>The PETSc library is installed in <code>deps/petsc-x.y.z</code>, where <code>x.y.z</code> is the current version of PETSc. Inside this directory, PETSc will create a directory for your machine&#39;s specific architecture. On my machine the architecture is <code>arch-linux2-c-debug</code>. Inside this directory are the usual <code>/bin</code>, <code>/lib</code> etc. directories.</p><p>In the process of building PETSc, output is redirected to log files in the <code>deps/petsc-x.y.z</code> directory. Specifically</p><ul><li><p>The output of <code>configure</code> is written to <code>fout</code></p></li><li><p>The output of <code>make</code> is written to <code>fout2</code></p></li><li><p>The output of <code>make test</code> is written to <code>fout3</code></p></li></ul><p>If any of these commands fail, the log files contain detail information that explain what happened.</p><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">PETSc2.jl Documentation</span></a><a class="next" href="init.html"><span class="direction">Next</span><span class="title">Initialization and Finalization</span></a></footer></article></body></html>
